(function($){$.fn.toggles=function(b){b=b||{};var a=$.extend({drag:!0,click:!0,text:{on:"ON",off:"OFF"},on:!0,animate:250,transition:"ease-in-out",checkbox:null,clicker:null,width:50,height:20,type:"compact"},b),m="select"==a.type;a.checkbox=$(a.checkbox);a.clicker&&(a.clicker=$(a.clicker));b="margin-left "+a.animate+"ms "+a.transition;var s={"-webkit-transition":b,"-moz-transition":b,transition:b},t={"-webkit-transition":"","-moz-transition":"",transition:""};return this.each(function(){var h=$(this),d=h.height(),
k=h.width();if(!d||!k)h.height(d=a.height),h.width(k=a.width);var c=$('<div class="toggle-slide">'),b=$('<div class="toggle-inner">'),f=$('<div class="toggle-on">'),p=$('<div class="toggle-off">'),g=$('<div class="toggle-blob">');a.on&&f.addClass("active");var l=d/2,n=k-l;f.css({height:d,width:n,textAlign:"center",textIndent:m?"":-l,lineHeight:d+"px"}).text(a.text.on);p.css({height:d,width:n,marginLeft:m?"":-l,textAlign:"center",textIndent:m?"":l,lineHeight:d+"px"}).text(a.text.off);g.css({height:d,
width:d,marginLeft:-l});b.css("width",2*k-d);m&&(h.css("width",2*n),g.hide());a.on&&(c.addClass("active"),a.checkbox.attr("checked",!0));h.html(c.html(b.append(f,g,p)));c.on("toggle",function(b,e){b&&b.stopPropagation();h.trigger("toggle",e);var g=k,l=d,j=c.toggleClass("active").hasClass("active"),f=c.find(".toggle-inner").css(s);c.find(".toggle-off").toggleClass("active");c.find(".toggle-on").toggleClass("active");a.checkbox.attr("checked",j);if(!m){var n=j?0:-g+l;f.css("margin-left",n);setTimeout(function(){f.css(t);
f.css("margin-left",n)},a.animate)}});if(a.click&&(!a.clicker||!a.clicker.has(h).length))h.on("click",function(b){(b.target!=g[0]||!a.drag)&&c.trigger("toggle",!c.hasClass("active"))});if(a.clicker)a.clicker.on("click",function(b){(b.target!=g[0]||!a.drag)&&c.trigger("toggle",!c.hasClass("active"))});if(a.drag&&!m){var e,q=(k-d)/4,r=function(j){h.off("mousemove");c.off("mouseleave");g.off("mouseup");var f=c.hasClass("active");!e&&a.click&&"mouseleave"!==j.type?c.trigger("toggle",!f):f?e<-q?c.trigger("toggle",
!f):b.animate({marginLeft:0},a.animate/2):e>q?c.trigger("toggle",!f):b.animate({marginLeft:-k+d},a.animate/2)},j=-k+d;g.on("mousedown",function(a){e=0;g.off("mouseup");c.off("mouseleave");var d=a.pageX;h.on("mousemove",g,function(a){e=a.pageX-d;c.hasClass("active")?(a=e,0<e&&(a=0),e<j&&(a=j)):(a=e+j,0>e&&(a=j),e>-j&&(a=0));b.css("margin-left",a)});g.on("mouseup",r);c.on("mouseleave",r)})}})};})(jQuery);
